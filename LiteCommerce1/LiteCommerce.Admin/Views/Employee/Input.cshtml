@model LiteCommerce.DomainModel.Employee
@{
    List<SelectListItem> ListCountries = SelectListHelper.ListOfCountries();
    List<SelectListItem> ListGroupName = SelectListHelper.ListRoles();
}
<div class="box-header with-border">
    <h3 class="box-title">@ViewBag.message</h3>
    <a class="pull-right btn" onclick="goBack()">Back to list</a>

    <script>
        function goBack() {
            window.history.back();
        }
    </script>

</div>
<div class="box box-primary">
    <div class="box-body">
        <form role="form" action="~/Employee/Input" method="post">
            <!-- Name -->
            <div class="box box-solid">
                <div class="box-body" style="padding:5px 30px">
                    <input type="hidden" name="EmployeeID" value="@Model.EmployeeID">
                    <div class="form-group row">
                        <div class="col-sm-6">
                            <label>First Name</label>
                            <div class="input-group">
                                <div class="input-group-addon">
                                    <i class="fa fa-bookmark-o"></i>
                                </div>
                                <input type="text" name="FirstName" class="form-control pull-right" placeholder="Enter ..." value="@Model.FirstName" required>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <label>Last Name</label>
                            <div class="input-group">
                                <div class="input-group-addon">
                                    <i class="fa fa-bookmark"></i>
                                </div>
                                <input type="text" name="LastName" class="form-control pull-right" placeholder="Enter ..." value="@Model.LastName" required>
                            </div>
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="col-sm-6">
                            <label>Title</label>
                            <div class="input-group">
                                <div class="input-group-addon">
                                    <i class="fa fa- fa-map-marker"></i>
                                </div>
                                <input type="text" name="Title" class="form-control pull-right" placeholder="Enter ..." value="@Model.Title" required>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <label>GroupName</label>
                            <div class="input-group">
                                <div class="input-group-addon">
                                    <i class="fa fa-user"></i>
                                </div>
                                <select name="GroupNames" class="form-control" value="@Model.GroupNames" required>
                                    <option value="">Choose GroupName</option>
                                    @foreach (var item in ListGroupName)
                                    {
                                        if (item.Value == Model.GroupNames)
                                        {
                                            <option value="@item.Value" selected>@item.Text</option>
                                        }
                                        else
                                        {
                                            <option value="@item.Value">@item.Text</option>
                                        }
                                    }
                                </select>
                            </div>
                        </div>

                    </div>
                    <div class="form-group row">
                        <div class="col-sm-6">
                            <label>BirthDate</label>
                            <div class="input-group">
                                <div class="input-group-addon">
                                    <i class="fa fa-calendar"></i>
                                </div>
                                <input type="text" name="BirthDate" class="form-control" data-inputmask="'alias': 'dd/mm/yyyy'" data-mask="" value="@Model.BirthDate.ToShortDateString()" required>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <label>HireDate</label>
                            <div class="input-group">
                                <div class="input-group-addon">
                                    <i class="fa fa-calendar"></i>
                                </div>
                                <input type="text" name="HireDate" class="form-control" data-inputmask="'alias': 'dd/mm/yyyy'" data-mask="" value="@Model.HireDate.ToShortDateString()" required>
                            </div>
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="col-sm-6">
                            <label>Country</label>
                            <div class="input-group">
                                <div class="input-group-addon">
                                    <i class="fa fa-globe"></i>
                                </div>
                                <select name="Country" class="form-control" value="@Model.Country" required>
                                    <option value="">Choose Country</option>
                                    @foreach (var item in ListCountries)
                                    {
                                        if (item.Value == Model.Country)
                                        {
                                            <option value="@item.Value" selected>@item.Text</option>
                                        }
                                        else
                                        {
                                            <option value="@item.Value">@item.Text</option>
                                        }
                                    }
                                </select>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <label>City</label>
                            <div class="input-group">
                                <div class="input-group-addon">
                                    <i class="fa  fa-bank"></i>
                                </div>
                                <input type="text" class="form-control" name="City" value="@Model.City" required />
                            </div>
                        </div>
                    </div>
                    <div class="form-group">

                    </div>

                    <div class="form-group row">
                        <div class="col-sm-6">
                            <label>Address</label>
                            <div class="input-group">
                                <div class="input-group-addon">
                                    <i class="fa fa- fa-map-marker"></i>
                                </div>
                                <input type="text" name="Address" class="form-control pull-right" placeholder="Enter ..." value="@Model.Address" required>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <label>Phone</label>
                            <div class="input-group">
                                <div class="input-group-addon">
                                    <i class="fa fa-phone"></i>
                                </div>
                                <input type="text" name="HomePhone" class="form-control pull-right" placeholder="Enter ..." value="@Model.HomePhone" required>
                            </div>
                        </div>
                    </div>

                    <div class="form-group row">
                        <div class="col-sm-6">
                            <label>Email</label>@Html.ValidationMessage("Email", new { @style = "color:red" })
                            <div class="input-group">
                                <div class="input-group-addon">
                                    <i class="fa fa-envelope"></i>
                                </div>
                                <input type="text" name="Email" class="form-control pull-right" placeholder="Enter ..." value="@Model.Email" required>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <label>Password</label>
                            <div class="input-group">
                                <div class="input-group-addon">
                                    <i class="fa fa-key"></i>
                                </div>
                                <input type="password" name="Password" class="form-control pull-right" placeholder="Enter ..." value="@Model.Password" required>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="box box-solid">
                <div class="box-body" style="padding:5px 30px">
                    <div class="form-group row" style="height:250px">
                        <div class="col-sm-9">
                            <label>Notes</label>
                            <div class="input-group">
                                <div class="input-group-addon">
                                    <i class="fa fa-pencil"></i>
                                </div>
                                <textarea class="form-control" style="height:190px" name="Notes" id="exampleFormControlTextarea4" rows="3" required>@Model.Notes</textarea>
                            </div>
                        </div>


                        <div class="col-sm-3">
                            <div style="display:block;">
                                <label for="exampleInputFile">Photo</label>
                                <div class="input-group">
                                    <div style="height:120px;width:220px;background-color:lightsteelblue;padding:0">
                                        <img id="pictureUpload" src="@Model.PhotoPath" alt="avatar" style="height:120px;width:220px;" />
                                    </div>
                                </div>
                            </div>
                            <div class="form-inline" style="margin:3px 0;">
                                <input type="text" name="PhotoPath" id="PhotoPath" class="form-control" style="display:inline-block; width:220px" value="@Model.PhotoPath" />
                                <input type="file" name="FileUpload" id="FileUpload" accept="image/*" style="display:none" />
                                <input type="button" id="btnUpload" value="Chọn ảnh" class="btn btn-primary" />
                            </div>
                        </div>
                        @section Upload
                        {
                            <script>
                                $(function () {
                                    $('#btnUpload').click(function () {
                                        $('#FileUpload').trigger('click');
                                    });
                                    // Bat su kien khi thay doi du lieu cua fileupload
                                    $('#FileUpload').change(function () {
                                        //Kiem tra trinh duyet co ho tro formdata hay khong
                                        if (window.FormData !== undefined) {
                                            //Lay du lieu tren fileupload
                                            var fileUpload = $('#FileUpload').get(0);
                                            var files = fileUpload.files;
                                            //tao doi tuong form data
                                            var formData = new FormData();
                                            formData.append('file', files[0]);
                                            $.ajax({
                                                type: 'POST',
                                                url: '/Employee/ProcessUpload',
                                                contentType: false, // khong co header
                                                processData: false, //khong xu ly du lieu
                                                data: formData,
                                                success: function (urlImage) {
                                                    $('#pictureUpload').attr('src', urlImage);
                                                    $('#PhotoPath').val(urlImage);
                                                },
                                                error: function (err) {
                                                    alert('Co loi xay ra: ' + err.statusText);
                                                }
                                            });
                                        }
                                    })
                                });
                            </script>
                        }

                    </div>

                </div>
                <div class="box-footer" style="margin: 5px 30px;">
                    <button type="submit" class="btn btn-success pull-left"><i class="fa fa-save"></i>  Save</button>
                    <a href="~/Employee/Index" class="btn btn-danger pull-left" style="margin-left:15px"><i class="fa fa-close"></i> Cancel</a>

                </div>
            </div>
            <!-- Contact info -->
        </form>
    </div>
</div>